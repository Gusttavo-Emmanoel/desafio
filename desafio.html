<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Notas</title>
</head>

<body>
    nome aluno <input id="iptNome">
    <br>
    nota1 <input id="iptN1" type="number"><br>
    nota2 <input id="iptN2" type="number"><br>
    nota3 <input id="iptN3" type="number"><br>
    <br>
    <button onclick="cadastro()">Cadastrar</button>
    <button onclick="listar()">Listar</button>
    <br><br>
    <div id="msg"></div>
</body>
<script>
    let vtAluno = [];

    function cadastro() {
        let nome = iptNome.value;
        let n1 = Number(iptN1.value);
        let n2 = Number(iptN2.value);
        let n3 = Number(iptN3.value);

        let erro = "";
        msg.innerHTML = "";

        // Validação
        let existe = false;
        for (let index = 0; index < vtAluno.length; index++) {
            if (nome.toLowerCase() == vtAluno[index].nome.toLowerCase()) {
                existe = true;
            }

        }

        if (nome == "" || iptN1.value == "" || iptN2.value == "" || iptN3.value == "") {
            erro += `O <b>nome</b> ou as <b>notas</b> não podem estar vazios <br>`
        }

        if (nome.length < 9) {
            erro += `O <b>nome</b> não pode ter menos que 9 caracteres <br>`
        }

        if (existe) {
            erro += `O <b>nome</b> não pode estar duplicado <br>`
        }

        if (n1 < 0 || n1 > 10) {
            erro += `A <b>nota1</b> tem que estar entre 0 e 10 <br>`
        }

        if (n2 < 0 || n2 > 10) {
            erro += `A <b>nota2</b> tem que estar entre 0 e 10 <br>`

        }

        if (n3 < 0 || n3 > 10) {
            erro += `A <b>nota3</b> tem que estar entre 0 e 10 <br>`

        }

        if (erro != "") {
            msg.innerHTML = erro
        } else {
            let media = (n1 + n2 + n3) / 3;
            let aluno = {
                nome: nome,
                n1: n1,
                n2: n2,
                n3: n3,
                media: media
            }
            vtAluno.push(aluno);
            msg.innerHTML = `Aluno <b>${nome}</b> foi cadastrado com sucesso`
        }
    }

    function listar() {
        msg.innerHTML = "";
        let ordem = prompt("Você gostaria de ver a lista de trás para frente?(1) ou de frente para trás?(2)")
        if (ordem == '1') {
            ordem = 'Decrescente'
        } else if (ordem == '2') {
            ordem = 'Crescente'
        }

        if (ordem == 'Decrescente') {
            for (let index = vtAluno.length - 1; index >= 0; index--) {
                msg.innerHTML += `Aluno: ${vtAluno[index].nome} – N1: ${vtAluno[index].n1}  – N2: ${vtAluno[index].n2}  – N3: ${vtAluno[index].n3}  – Média: ${vtAluno[index].media.toFixed(2)}  – ${ordem}<br>`
            }
        }
        else if (ordem == 'Crescente') {
            for (let index = 0; index < vtAluno.length; index++) {
                msg.innerHTML += `Aluno: ${vtAluno[index].nome} – N1: ${vtAluno[index].n1}  – N2: ${vtAluno[index].n2}  – N3: ${vtAluno[index].n3}  – Média: ${vtAluno[index].media.toFixed(2)}  – ${ordem}<br>`
            }

        } else {
            msg.innerHTML = `Escolha uma ordem correta`
        }
    }

    function media() {
        if (vtAluno.length > 0) {
            let media = prompt('Você gostaria de ver a maior média?(1) ou a menor média?(2).')

            let maior = vtAluno[0].media;
            let menor = vtAluno[0].media;
            let indexMaior = 0;
            let indexMenor = 0;

            for (let index = 0; index < vtAluno.length; index++) {
                if (vtAluno[index].media > maior) {
                    maior = vtAluno[index].media;
                    indexMaior = index
                }
                if (vtAluno[index].media < menor) {
                    menor = vtAluno[index].media
                    indexMenor = index;
                }
            }
           
            if (media == '1') {
                msg.innerHTML = `Aluno: ${vtAluno[indexMaior].nome} – N1: ${vtAluno[indexMaior].n1}  – N2: ${vtAluno[indexMaior].n2}  – N3: ${vtAluno[indexMaior].n3}  – Média: ${vtAluno[indexMaior].media.toFixed(2)}`

            } else if (media == '2') {
                msg.innerHTML = `Aluno: ${vtAluno[indexMenor].nome} – N1: ${vtAluno[indexMenor].n1}  – N2: ${vtAluno[indexMenor].n2}  – N3: ${vtAluno[indexMenor].n3}  – Média: ${vtAluno[indexMenor].media.toFixed(2)}`
            }else{
                // msg.innerHTML = "Informe um (1) para a maior média ou (2) para a menor média."
                media();
            }
        } else {
            msg.innerHTML = "Não tem alunos cadastrado."
        }
    }

function buscarAluno() {
        let nomeAluno = prompt("Qual o nome do aluno que você esta buscando ?");
        let res;

        for (let index = 0; index < vtAluno.length; index++) {
            if (nomeAluno.toLowerCase() == vtAluno[index].nome.toLowerCase()) {
                res = `Aluno: ${vtAluno[index].nome} – N1: ${vtAluno[index].n1}  – N2: ${vtAluno[index].n2}  – N3: ${vtAluno[index].n3}  – Média: ${((vtAluno[index].n1 + vtAluno[index].n2 + vtAluno[index].n3) / 3).toFixed(1)}`;
                break
            } else {
                res = `O aluno ${nomeAluno} não foi cadastrado.`
            }
        }
        msg.innerHTML = res;
    }
</script>

</html>